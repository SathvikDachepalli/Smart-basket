<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart basket TEAM3</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://unpkg.com/html5-qrcode" type="text/javascript"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    <script src="html5-qrcode.min.js"></script>
</head>

<body>
    <div class="row">
        <div>
          <div style="width:500px;" id="reader"></div>
        </div>
        <div style="padding:30px;">
          <h4>SCAN RESULT</h4>
          <div id="result">Result Here</div>
        </div>
    </div>

    <div class="user-interface">
        <div class="item-container" id="item-container">
            <table cellspacing="30" id="table">
                <thead>
                    <th>Item</th>
                    <th>Price</th>
                    <th>Weight</th>
                    <th>Quantity</th>
                </thead>
            </table>
        </div>
        <div class="form-container">
            <label for="barcode-data">Bar code:</label>
            <div
                onclick="$('#item-name').prop('disabled',true);$('#price-input').prop('disabled',true); $('#barcode-data').prop('disabled',false)">
                <input id="barcode-data" type="text" name="barcode-data" placeholder="Barcode of the item"
                    autocomplete="off">
            </div>
            <br>
            <br>
            <div id="name"></div>
            <div id="price"></div>
            <label for="item-name">Item Name:</label>
            <div
                onclick="$('#item-name').prop('disabled',false);$('#price-input').prop('disabled',false);$('#barcode-data').prop('disabled',true);">
                <input id="item-name" type="text" name="itemName" placeholder="Name of the item" autocomplete="off">
            </div>
            <br>
            <br>
            <label for="price-input">Price:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</label>
            <input id="price-input" type="number" min="1" name="priceAmt" placeholder="Price of the item"
                autocomplete="off">
            <br>
            <br>
            <label for="price-input">Quantity:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</label>
            <input id="quant-input" type="number" min="1" name="quantity" placeholder="Enter quantity" autocomplete="off">
            <br>
            <button type="submit" id="submit-btn">Submit</button>
        </div>
    </div>
    <div class="bill-counter item-container" style="padding: 1.5rem;">
        <h1>Total items = <span id="span1">0</span></h1>
        <h1>Total bill = <span id="span2">Rs.0/-</span></h1>
    </div>


    <!-- js script -->
    <script type="text/javascript">
        function onScanSuccess(qrCodeMessage) {
            document.getElementById('result').innerHTML = '<span class="result">'+qrCodeMessage+'</span>';
            qrCodeMessage = JSON.parse(qrCodeMessage);
            addItem(qrCodeMessage["name"], qrCodeMessage["price"], qrCodeMessage["weight"], 1);
        }function onScanError(err){}
        var html5QrcodeScanner = new Html5QrcodeScanner(
            "reader", { fps: 10, qrbox: 250 });
        html5QrcodeScanner.render(onScanSuccess, onScanError);

        // Adding items into table/cart
        function addItem(name, price, weight, quantity){
            bar_update(name, price, weight, quantity);
        }
    </script>
    <script src="script.js"> </script>
</body>